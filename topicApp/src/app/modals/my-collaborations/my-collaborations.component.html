<ion-header translucent>
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button fill="clear" color="primary" (click)="dismissModal()">Close</ion-button>
    </ion-buttons>
    <ion-title>
      <ion-icon name="color-filter-outline" />
      My Collaborations
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-toolbar>
    <ion-item>
      <p>My Lists</p>
      <ion-button fill="clear" color="primary" slot="end" (click)="showCreateRestaurantList()"><ion-icon name="add-circle-outline"></ion-icon></ion-button>
    </ion-item>

  </ion-toolbar>
  <ion-card *ngIf="!(yourRestaurantsLists && yourRestaurantsLists.length > 0)">
    <ion-item>
      <h3>You still haven't created a list!</h3>
      <p>Click on the (+) button located at the top right of the screen to create one, witin the "My Lists" toolbar.</p>
    </ion-item>
  </ion-card>

  <div *ngIf="(yourRestaurantsLists && yourRestaurantsLists.length > 0)">
  <ion-card *ngFor="let restaurantList of yourRestaurantsLists">
    <ion-item>
      <ion-list>
        <ion-item>
          <h3>{{restaurantList.listName}}</h3>
          <ion-button fill="clear" color="primary" slot="end" (click)="presentRestaurantListDeletionAlert(restaurantList.listID, restaurantList.listName)"><ion-icon name="trash-outline"></ion-icon></ion-button>
          <ion-button fill="clear" color="primary" slot="end"><ion-icon name="create-outline"></ion-icon></ion-button>
        </ion-item>
        <ion-item>
          <ion-icon name="calendar-outline"></ion-icon>
          <ion-label>Date of creation:</ion-label>
          {{restaurantList.dateOfCreation}}
        </ion-item>

        <ion-item *ngIf="restaurantList.collaborators && restaurantList.collaborators.length > 0">
          <ion-icon name="people-circle-outline"></ion-icon>
          <ion-label>Collaborators:</ion-label>
          <ion-list>
            <ion-item *ngFor="let collaborator of restaurantList.collaborators" class="collaborators-list">
              User: {{collaborator.username}} â€¢ Permissions: {{collaborator.permission}}
            </ion-item>
          </ion-list>
        </ion-item>

        <ion-list *ngFor="let restaurant of restaurantList.restaurants">

        <ion-item>
          <ion-thumbnail class="ion-margin-end thumbnail">
            <ion-img src="{{restaurant.thumbnailURL}}"/>
          </ion-thumbnail>

          <ion-label>
            <h1>
              <ion-icon name="restaurant-outline"></ion-icon>
              {{restaurant.restaurantName}}
            </h1>
            <h4>
              <ion-icon name="star-half-outline"></ion-icon>
              Ranking: {{restaurant.ranking}}/5
            </h4>
            <h4>
              <ion-icon name="earth-outline"></ion-icon>
              Cuisine: {{restaurant.cuisine}}
            </h4>
            <p>
              <ion-icon name="pin-outline"></ion-icon>
              {{restaurant.address}}
            </p>
          </ion-label>
        </ion-item>
        </ion-list>
      </ion-list>
    </ion-item>
  </ion-card>
  </div>

  <ion-toolbar>
    <p>Shared with me</p>
  </ion-toolbar>

  <ion-card *ngIf="!(sharedWithMeRestaurantLists && sharedWithMeRestaurantLists.length > 0)">
    <ion-item>
      <h3>Uh-oh!</h3>
    </ion-item>
    <ion-item>
      <p>No one's shared with you their restaurant list yet... :(</p>
    </ion-item>
  </ion-card>

  <div *ngIf="(sharedWithMeRestaurantLists && sharedWithMeRestaurantLists.length > 0)">
    <ion-card>
      <ion-item *ngFor="let sharedList of sharedWithMeRestaurantLists" detail (click)="goToSharedList(sharedList.sharedListName)">
        <ion-list>
        <ion-label>
          <h1>
            <ion-icon name="list-circle-outline"></ion-icon>
            {{sharedList?.sharedListName}}
          </h1>
          <h4>
            <ion-icon name="pencil-outline"></ion-icon>
            Author: {{sharedList?.sharedListAuthor}}
          </h4>
          <h4>
            <ion-icon name="document-lock-outline"></ion-icon>
            My permissions: {{sharedList?.myPermissions}}
          </h4>
          <h4>
            <ion-icon name="fast-food-outline"></ion-icon>
            Number of restaurants: {{sharedList?.restaurants?.length}}
          </h4>
          <h4>
            <ion-icon name="people-circle-outline"></ion-icon>
            Number of collaborators: {{sharedList?.collaborators?.length}}
          </h4>
        </ion-label>
      </ion-list>
      </ion-item>
    </ion-card>
  </div>

</ion-content>


